#!nsh
#
# @name align800
#
# @type Helicopter
# @class Copter
#
# @maintainer houyongqiang@sia.cn
#
# @output MAIN1 rear motor
# @output MAIN2 left swashplate servo
# @output MAIN3 right swashplate servo
# @output MAIN4 tail swashplate servo
# @output MAIN5 main servo
#

sh /etc/init.d/rc.mc_defaults

# Configure as helicopter (number 4 defined in commander_helper.cpp)
set MAV_TYPE 4

set MIXER align800ccpm

set PWM_OUT 1234

if [ $AUTOCNF == yes ]
then
	param set MC_ACRO_P_MAX		 270
	param set MC_ACRO_R_MAX		 540
	param set MC_ACRO_Y_MAX		 120
	param set MC_PITCHRATE_D	 0.003
	param set MC_PITCHRATE_FF	 0
	param set MC_PITCHRATE_I	 0.025
	param set MC_PITCHRATE_P	 0.13
	param set MC_PITCH_P	         9
	param set MC_ROLLRATE_D	         0.002
	param set MC_ROLLRATE_FF	 0
	param set MC_ROLLRATE_I	         0.02
	param set MC_ROLLRATE_P	         0.07
	param set MC_ROLL_P	         6.8
	param set MC_YAWRATE_D	         0
	param set MC_YAWRATE_FF	         0
	param set MC_YAWRATE_I	         0.2
	param set MC_YAWRATE_MAX	 120
	param set MC_YAWRATE_P	         0.25
	param set MC_YAW_FF	         0.5
	param set MC_YAW_P	         2.8

	param set MPC_LAND_SPEED	 1
	param set MPC_MAN_P_MAX	         35
	param set MPC_MAN_R_MAX	         35
	param set MPC_MAN_Y_MAX	         120
	param set MPC_THR_MAX	         1
	param set MPC_THR_MIN	         0.1
	param set MPC_TILTMAX_AIR	 45
	param set MPC_TILTMAX_LND	 15
	param set MPC_X_FF	         0.5
	param set MPC_X_I	         0
	param set MPC_X_P	         0.6
	param set MPC_X_VEL_D	         0
	param set MPC_X_VEL_I	         0.02
	param set MPC_X_VEL_MAX	         5
	param set MPC_X_VEL_P	         0.08
	param set MPC_Y_FF	         0.5
	param set MPC_Y_I	         0
	param set MPC_Y_P	         0.6
	param set MPC_Y_VEL_D	         0
	param set MPC_Y_VEL_I	         0.02
	param set MPC_Y_VEL_MAX	         5
	param set MPC_Y_VEL_P	         0.08
	param set MPC_Z_FF	         0.5
	param set MPC_Z_I	         0
	param set MPC_Z_P	         1
	param set MPC_Z_VEL_D	         0
	param set MPC_Z_VEL_I	         0.03
	param set MPC_Z_VEL_MAX	         3
	param set MPC_Z_VEL_P	         0.08

	param set MPC_THR_MIN 0.06
	param set MPC_MANTHR_MIN 0.06

	param set ATT_BIAS_MAX 0.0

	param set CBRK_IO_SAFETY 0
fi
